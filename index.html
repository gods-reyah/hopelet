<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hopelet</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Romantic Font -->
    <link href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kaushan Script&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Italianno&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- Poppins Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">


    <!-- Firebase Initialization (Global) -->
    <script type="module">
        // Import Firebase SDK (modular)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js";
        import {
            getFirestore, doc, getDoc, updateDoc, increment
        } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore.js";

        // Your Firebase config (replace with real values)
        const firebaseConfig = {
            apiKey: "AIzaSyCIF88o3yshlQsyWfD31UdP800nzs8SDLw",
            authDomain: "hopelet-e459d.firebaseapp.com",
            projectId: "hopelet-e459d",
            storageBucket: "hopelet-e459d.firebasestorage.app",
            messagingSenderId: "379401277653",
            appId: "1:379401277653:web:1cea62d45fb76c3c48125c",
            measurementId: "G-G8Y9KZLLPK"
        };

        // Initialize Firebase only once
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ‚úÖ Make available to all scripts
        window.db = db;
        window.firebaseFns = { doc, getDoc, updateDoc, increment };

        // üî• Make all Firestore functions accessible globally
        //window.db = db;
        //window.firebaseFns = { doc, getDoc, setDoc, updateDoc };
    </script>



    <style>
        body {
            font-family: 'Sacramento', 'Kaushan Script', 'Italianno';
        }

        /* Floating animation */
        @keyframes float {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-15px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        @media (max-width: 768px) {
            body {
                font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', sans-serif;
                font-size: 17px;
                line-height: 1.6;
            }
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.2;
            }
        }

        .animate-blink {
            animation: blink 1s infinite;
        }


        #calendar-section {
            font-family: 'Poppins', sans-serif;
        }

        .float {
            animation: float 6s ease-in-out infinite;
        }

        /* Gradient background animation */
        @keyframes gradient {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        @media (max-width: 640px) {
            .scroll-indicator {
                bottom: 7rem;
                /* Move further up */
            }
        }




        .gradient-bg {
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #a18cd1, #fbc2eb);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }

        /* Heart pulse animation */
        @keyframes pulse-heart {
            0% {
                transform: scale(1);
                opacity: 0.4;
            }

            50% {
                transform: scale(1.2);
                opacity: 0.7;
            }

            100% {
                transform: scale(1);
                opacity: 0.4;
            }
        }

        .pulse-heart {
            animation: pulse-heart 4s ease-in-out infinite;
        }

        /* Down arrow bounce */
        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .animate-pulse {
            animation: pulse 1.5s infinite;
        }


        .arrow-bounce {
            animation: bounce 1.5s infinite;
        }

        /* Romantic readable font */
        .hopelet-title {
            font-family: 'Italianno', cursive;
            transition: color 0.5s ease;
        }

        .hopelet-subtitle {
            font-family: 'Kaushan Script';
            letter-spacing: 0.05em;
            /* slightly spaced letters */
            word-spacing: 0.15em;
            /* slightly spaced words */
            transition: color 0.5s ease;
        }
    </style>
</head>

<body class="text-white overflow-x-hidden">

    <!-- Section 1: Landing Page -->
    <section class="gradient-bg min-h-screen flex flex-col justify-center items-center relative text-center px-6">

        <!-- Floating decorative blobs -->
        <div class="absolute top-10 left-10 w-24 h-24 bg-pink-400 opacity-30 rounded-full blur-3xl float"></div>
        <div class="absolute bottom-20 right-20 w-32 h-32 bg-purple-400 opacity-30 rounded-full blur-3xl float"></div>
        <div class="absolute top-1/2 left-1/3 w-20 h-20 bg-yellow-300 opacity-20 rounded-full blur-2xl float"></div>

        <!-- Floating blurred hearts -->
        <div class="absolute top-20 right-1/4 text-pink-300 text-6xl pulse-heart blur-sm">‚ù§</div>
        <div class="absolute bottom-32 left-1/3 text-pink-200 text-5xl pulse-heart blur-sm">‚ù§</div>
        <div class="absolute top-1/3 left-1/4 text-pink-400 text-7xl pulse-heart blur-sm">‚ù§</div>

        <!-- Project Name -->
        <h1 class="hopelet-title text-7xl md:text-8xl lg:text-9xl font-extrabold drop-shadow-lg dynamic-text">
            Hopelet
        </h1>
        <p class="hopelet-subtitle mt-4 text-3xl md:text-4xl italic font-bold opacity-90 dynamic-text">
            Let the hope begin...
        </p>


        <!-- Down Arrow (scroll indicator) -->
        <div onclick="document.getElementById('main-section').scrollIntoView({ behavior: 'smooth' })"
            class="absolute bottom-10 sm:bottom-10 bottom-28 cursor-pointer arrow-bounce text-white opacity-80 hover:opacity-100 transition">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
        </div>


    </section>

    <!-- Section 2: Main Project Area -->
    <section id="main-section" class="min-h-screen bg-gray-100 text-gray-900 relative overflow-hidden">

        <!-- Desktop layout: two side-by-side panels -->
        <div class="hidden md:grid grid-cols-2 gap-6 p-6 h-full">

            <!-- Abhi's Panel -->
            <div
                class="rounded-3xl p-8 flex flex-col gap-6 items-center justify-center text-2xl font-bold bg-gradient-to-br from-pink-400 to-purple-500 text-black shadow-lg">

                <!-- Abhi Box at Top -->
                <div class="w-full">
                    <div
                        class="bg-gradient-to-r from-yellow-500 to-orange-100 rounded-2xl shadow-lg flex items-center justify-center px-6 py-4 w-full">
                        <span class="text-Black text-3xl font-bold">Abhi</span>
                    </div>
                </div>

                <!-- Counter Cards Row -->
                <div class="flex flex-col md:flex-row gap-6 w-full">

                    <!-- First Counter Card -->
                    <div class="flex-1 bg-white rounded-2xl shadow-md font-sans">
                        <div id="count-card"
                            class="bg-gradient-to-r from-purple-600 to-purple-400 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full h-full hover:shadow-xl transition-shadow duration-300 cursor-pointer relative">

                            <!-- Image -->
                            <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                                <img id="card-image" src="./img/1.jpg" alt="icon"
                                    class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">

                                <!-- Plus Icon -->
                                <svg id="plus-icon" xmlns="http://www.w3.org/2000/svg"
                                    class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                    fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                                </svg>
                            </div>

                            <!-- Count -->
                            <div class="flex flex-1 items-center justify-center">
                                <!-- Spinner -->
                                <div id="count-loading" class="hidden flex justify-center items-center">
                                    <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                            stroke-width="4">
                                        </circle>
                                        <path class="opacity-75" fill="currentColor"
                                            d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"></path>
                                    </svg>
                                </div>
                                <span id="count-value" class="text-white text-5xl font-bold">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Rosary Counter Card -->
                    <div class="flex-1 bg-white rounded-2xl shadow-md font-sans">
                        <div id="rosary-count-card"
                            class="bg-gradient-to-r from-blue-400 to-blue-300 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full h-full hover:shadow-xl transition-shadow duration-300 cursor-pointer relative">

                            <!-- Image -->
                            <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                                <img id="rosary-card-image" src="./img/2.jpg" alt="Rosary"
                                    class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">

                                <!-- Plus Icon -->
                                <svg id="rosary-plus-icon" xmlns="http://www.w3.org/2000/svg"
                                    class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                    fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                                </svg>
                            </div>

                            <!-- Count -->
                            <div class="flex flex-1 items-center justify-center">
                                <!-- Spinner -->
                                <div id="rosary-count-loading" class="hidden flex justify-center items-center">
                                    <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                            stroke-width="4">
                                        </circle>
                                        <path class="opacity-75" fill="currentColor"
                                            d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"></path>
                                    </svg>
                                </div>
                                <span id="rosary-count-value" class="text-white text-5xl font-bold">0</span>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- New Row of Cards (Mercy Rosary and Adoration) -->
                <div class="flex flex-col md:flex-row gap-6 w-full">

                    <!-- Mercy Rosary Card -->
                    <div class="flex-1 bg-white rounded-2xl shadow-md font-sans">
                        <div id="mercy-rosary-count-card"
                            class="bg-gradient-to-r from-pink-400 to-pink-300 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full h-full hover:shadow-xl transition-shadow duration-300 cursor-pointer relative">

                            <!-- Image -->
                            <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                                <img id="mercy-rosary-image" src="./img/3.jpg" alt="Mercy Rosary"
                                    class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">
                                <svg id="mercy-rosary-plus-icon" xmlns="http://www.w3.org/2000/svg"
                                    class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                    fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                                </svg>
                            </div>

                            <!-- Count -->
                            <div class="flex flex-1 items-center justify-center">
                                <div id="mercy-rosary-loading" class="hidden flex justify-center items-center">
                                    <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                            stroke-width="4" />
                                        <path class="opacity-75" fill="currentColor"
                                            d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z" />
                                    </svg>
                                </div>
                                <span id="mercy-rosary-count-value" class="text-white text-5xl font-bold">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Adoration Card -->
                    <div class="flex-1 bg-white rounded-2xl shadow-md font-sans">
                        <div id="adoration-count-card"
                            class="bg-gradient-to-r from-green-400 to-green-300 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full h-full hover:shadow-xl transition-shadow duration-300 cursor-pointer relative">

                            <!-- Image -->
                            <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                                <img id="adoration-card-image" src="./img/4.jpg" alt="Adoration"
                                    class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">
                                <svg id="adoration-plus-icon" xmlns="http://www.w3.org/2000/svg"
                                    class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                    fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                                </svg>
                            </div>

                            <!-- Count -->
                            <div class="flex flex-1 items-center justify-center">
                                <div id="adoration-count-loading" class="hidden flex justify-center items-center">
                                    <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                            stroke-width="4" />
                                        <path class="opacity-75" fill="currentColor"
                                            d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z" />
                                    </svg>
                                </div>
                                <span id="adoration-count-value" class="text-white text-5xl font-bold">0</span>
                            </div>
                        </div>

                    </div>



                </div>
                <!-- Abhi Confession Reminder Card -->
                <div class="w-full flex justify-center mt-6">
                    <div id="abhi-date-card"
                        class="rounded-2xl px-6 py-4 w-3/4 text-center text-lg font-semibold font-sans tracking-wide shadow-lg transition-all duration-300">
                        <span id="abhi-selected-date-text" class="block text-base sm:text-lg">--/--/----</span>
                    </div>
                </div>



            </div>



            <!-- Melna's Panel -->
            <div
                class="rounded-3xl p-8 flex flex-col gap-6 items-center justify-center text-2xl font-bold bg-gradient-to-br from-pink-400 to-purple-500 text-black shadow-lg">

                <!-- Melna Header -->
                <div class="w-full">
                    <div
                        class="bg-gradient-to-r from-yellow-500 to-orange-100 rounded-2xl shadow-lg flex items-center justify-center px-6 py-4 w-full">
                        <span class="text-black text-3xl font-bold">Melna</span>
                    </div>
                </div>

                <!-- Counter Cards Row -->
                <div class="flex flex-col md:flex-row gap-6 w-full">

                    <!-- Melna Counter Card -->
                    <div class="flex-1 bg-white rounded-2xl shadow-md font-sans">
                        <div id="melna-count-card"
                            class="bg-gradient-to-r from-purple-600 to-purple-400 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full h-full hover:shadow-xl transition-shadow duration-300 cursor-pointer relative">

                            <!-- Image -->
                            <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                                <img id="melna-card-image" src="./img/1.jpg" alt="Melna"
                                    class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">

                                <!-- Plus Icon -->
                                <svg id="melna-plus-icon" xmlns="http://www.w3.org/2000/svg"
                                    class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                    fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                                </svg>
                            </div>

                            <!-- Count -->
                            <div class="flex flex-1 items-center justify-center">
                                <!-- Spinner -->
                                <div id="melna-count-loading" class="hidden flex justify-center items-center">
                                    <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                            stroke-width="4">
                                        </circle>
                                        <path class="opacity-75" fill="currentColor"
                                            d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"></path>
                                    </svg>
                                </div>
                                <span id="melna-count-value" class="text-white text-5xl font-bold">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Melna Rosary Counter Card -->
                    <div class="flex-1 bg-white rounded-2xl shadow-md font-sans">
                        <div id="melna-rosary-count-card"
                            class="bg-gradient-to-r from-blue-400 to-blue-300 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full h-full hover:shadow-xl transition-shadow duration-300 cursor-pointer relative">

                            <!-- Image -->
                            <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                                <img id="melna-rosary-card-image" src="./img/2.jpg" alt="Rosary"
                                    class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">

                                <!-- Plus Icon -->
                                <svg id="melna-rosary-plus-icon" xmlns="http://www.w3.org/2000/svg"
                                    class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                    fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                                </svg>
                            </div>

                            <!-- Count -->
                            <div class="flex flex-1 items-center justify-center">
                                <!-- Spinner -->
                                <div id="melna-rosary-count-loading" class="hidden flex justify-center items-center">
                                    <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                            stroke-width="4">
                                        </circle>
                                        <path class="opacity-75" fill="currentColor"
                                            d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"></path>
                                    </svg>
                                </div>
                                <span id="melna-rosary-count-value" class="text-white text-5xl font-bold">0</span>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- New Row of Cards for Melna (Mercy Rosary and Adoration) -->
                <div class="flex flex-col md:flex-row gap-6 w-full">

                    <!-- Melna Mercy Rosary Card -->
                    <div class="flex-1 bg-white rounded-2xl shadow-md font-sans">
                        <div id="melna-mercy-rosary-count-card"
                            class="bg-gradient-to-r from-pink-400 to-pink-300 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full h-full hover:shadow-xl transition-shadow duration-300 cursor-pointer relative">

                            <!-- Image -->
                            <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                                <img id="melna-mercy-rosary-image" src="./img/3.jpg" alt="Mercy Rosary"
                                    class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">
                                <svg id="melna-mercy-rosary-plus-icon" xmlns="http://www.w3.org/2000/svg"
                                    class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                    fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                                </svg>
                            </div>

                            <!-- Count -->
                            <div class="flex flex-1 items-center justify-center">
                                <div id="melna-mercy-rosary-loading" class="hidden flex justify-center items-center">
                                    <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                            stroke-width="4" />
                                        <path class="opacity-75" fill="currentColor"
                                            d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z" />
                                    </svg>
                                </div>
                                <span id="melna-mercy-rosary-count-value" class="text-white text-5xl font-bold">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Melna Adoration Card -->
                    <div class="flex-1 bg-white rounded-2xl shadow-md font-sans">
                        <div id="melna-adoration-count-card"
                            class="bg-gradient-to-r from-green-400 to-green-300 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full h-full hover:shadow-xl transition-shadow duration-300 cursor-pointer relative">

                            <!-- Image -->
                            <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                                <img id="melna-adoration-card-image" src="./img/4.jpg" alt="Adoration"
                                    class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">
                                <svg id="melna-adoration-plus-icon" xmlns="http://www.w3.org/2000/svg"
                                    class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                    fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                                </svg>
                            </div>

                            <!-- Count -->
                            <div class="flex flex-1 items-center justify-center">
                                <div id="melna-adoration-count-loading" class="hidden flex justify-center items-center">
                                    <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                            stroke-width="4" />
                                        <path class="opacity-75" fill="currentColor"
                                            d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z" />
                                    </svg>
                                </div>
                                <span id="melna-adoration-count-value" class="text-white text-5xl font-bold">0</span>
                            </div>
                        </div>
                    </div>



                </div>
                <!-- Confession Reminder Card for Melna -->
                <div class="w-full flex justify-center mt-6">
                    <div id="melna-date-card"
                        class="rounded-2xl px-6 py-4 w-3/4 text-center text-lg font-semibold font-sans tracking-wide shadow-lg transition-all duration-300">
                        <span id="melna-selected-date-text" class="block text-base sm:text-lg">--/--/----</span>
                    </div>
                </div>




            </div>
            <!-- Down Arrow (scroll indicator) -->
            <div onclick="document.getElementById('calender-section').scrollIntoView({ behavior: 'smooth' })"
                class="absolute bottom-2 left-1/2 transform -translate-x-1/2 cursor-pointer arrow-bounce text-black opacity-80 hover:opacity-100 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                </svg>
            </div>





        </div>

        <!-- Mobile layout: one panel at a time -->
        <div class="md:hidden relative min-h-screen overflow-y-auto">

            <!-- Wrapper for panels -->
            <div id="mobilePanels" class="w-full h-full flex transition-transform duration-500 ease-in-out">

                <!-- Panel 1: Abhi's Panel -->
                <div class="min-w-full p-4 bg-gradient-to-br from-pink-400 to-purple-500 flex flex-col">
                    <!-- Abhi Box at Top -->
                    <div class="w-full">
                        <div
                            class="bg-gradient-to-r from-yellow-500 to-orange-100 rounded-2xl shadow-lg flex items-center justify-center px-6 py-4 w-full">
                            <span class="text-black text-3xl font-bold">Abhi</span>
                        </div>
                    </div>

                    <!-- Holy Mass Counter Card (Mobile) -->
                    <div id="count-card-mobile"
                        class="bg-gradient-to-r from-pink-400 to-purple-400 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full hover:shadow-xl transition-shadow duration-300 cursor-pointer relative mt-4">

                        <!-- Image / Plus Icon Wrapper -->
                        <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                            <img id="card-image-mobile" src="./img/1.jpg" alt="Holy Mass"
                                class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">
                            <!-- Plus Icon -->
                            <svg id="plus-icon-mobile" xmlns="http://www.w3.org/2000/svg"
                                class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                            </svg>
                        </div>

                        <!-- Count -->
                        <div class="flex flex-1 items-center justify-center">
                            <div id="count-loading-mobile" class="hidden flex justify-center items-center">
                                <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                    fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                        stroke-width="4">
                                    </circle>
                                    <path class="opacity-75" fill="currentColor"
                                        d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"></path>
                                </svg>
                            </div>
                            <span id="count-value-mobile" class="text-white text-5xl font-bold">0</span>
                        </div>
                    </div>

                    <!-- Rosary Counter Card (Mobile) -->
                    <div id="rosary-count-card-mobile"
                        class="bg-gradient-to-r from-blue-400 to-blue-300 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full hover:shadow-xl transition-shadow duration-300 cursor-pointer relative mt-4">

                        <!-- Image / Plus Icon Wrapper -->
                        <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                            <img id="rosary-card-image-mobile" src="./img/2.jpg" alt="Rosary"
                                class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">
                            <!-- Plus Icon -->
                            <svg id="rosary-plus-icon-mobile" xmlns="http://www.w3.org/2000/svg"
                                class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                            </svg>
                        </div>

                        <!-- Count -->
                        <div class="flex flex-1 items-center justify-center">
                            <div id="rosary-count-loading-mobile" class="hidden flex justify-center items-center">
                                <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                    fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                        stroke-width="4">
                                    </circle>
                                    <path class="opacity-75" fill="currentColor"
                                        d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"></path>
                                </svg>
                            </div>
                            <span id="rosary-count-value-mobile" class="text-white text-5xl font-bold">0</span>
                        </div>
                    </div>
                    <!-- Abhi Mercy Rosary Card (Mobile) -->
                    <div id="mercy-rosary-count-card-mobile"
                        class="bg-gradient-to-r from-pink-400 to-pink-300 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full hover:shadow-xl transition-shadow duration-300 cursor-pointer relative mt-4">
                        <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                            <img id="mercy-rosary-card-image-mobile" src="./img/3.jpg" alt="Mercy Rosary"
                                class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">
                            <svg id="mercy-rosary-plus-icon-mobile" xmlns="http://www.w3.org/2000/svg"
                                class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                            </svg>
                        </div>
                        <div class="flex flex-1 items-center justify-center">
                            <div id="mercy-rosary-count-loading-mobile" class="hidden flex justify-center items-center">
                                <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                    fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                        stroke-width="4" />
                                    <path class="opacity-75" fill="currentColor"
                                        d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z" />
                                </svg>
                            </div>
                            <span id="mercy-rosary-count-value-mobile" class="text-white text-5xl font-bold">0</span>
                        </div>
                    </div>

                    <!-- Adoration Counter Card (Mobile) - Abhi -->
                    <div id="adoration-count-card-mobile-abhi"
                        class="bg-gradient-to-r from-green-400 to-green-300 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full hover:shadow-xl transition-shadow duration-300 cursor-pointer mt-4 relative">

                        <!-- Image / Plus Icon Wrapper -->
                        <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                            <img id="adoration-card-image-mobile-abhi" src="./img/4.jpg" alt="Adoration"
                                class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">
                            <svg id="adoration-plus-icon-mobile-abhi" xmlns="http://www.w3.org/2000/svg"
                                class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                            </svg>
                        </div>

                        <!-- Count -->
                        <div class="flex flex-1 items-center justify-center">
                            <div id="adoration-count-loading-mobile-abhi"
                                class="hidden flex justify-center items-center">
                                <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                    fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                        stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor"
                                        d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"></path>
                                </svg>
                            </div>
                            <span id="adoration-count-value-mobile-abhi" class="text-white text-5xl font-bold">0</span>
                        </div>

                    </div>










                </div>

                <!-- Panel 2: Melna's Panel -->
                <div class="min-w-full p-4 bg-gradient-to-br from-pink-400 to-purple-500 flex flex-col">
                    <div class="w-full">
                        <div
                            class="bg-gradient-to-r from-yellow-500 to-orange-100 rounded-2xl shadow-lg flex items-center justify-center px-6 py-4 w-full">
                            <span class="text-black text-3xl font-bold">Melna</span>
                        </div>
                    </div>

                    <!-- Holy Mass Counter -->
                    <div id="melna-count-card-mobile"
                        class="bg-gradient-to-r from-pink-400 to-purple-400 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full hover:shadow-xl transition-shadow duration-300 cursor-pointer mt-4 relative">
                        <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                            <img id="melna-card-image-mobile" src="./img/1.jpg" alt="Holy Mass"
                                class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">
                            <svg id="melna-plus-icon-mobile" xmlns="http://www.w3.org/2000/svg"
                                class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                            </svg>
                        </div>
                        <div class="flex flex-1 items-center justify-center">
                            <div id="melna-count-loading-mobile" class="hidden flex justify-center items-center">
                                <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                    fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                        stroke-width="4">
                                    </circle>
                                    <path class="opacity-75" fill="currentColor"
                                        d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"></path>
                                </svg>
                            </div>
                            <span id="melna-count-value-mobile" class="text-white text-5xl font-bold">0</span>
                        </div>
                    </div>

                    <!-- Rosary Counter -->
                    <div id="melna-rosary-count-card-mobile"
                        class="bg-gradient-to-r from-blue-400 to-blue-300 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full hover:shadow-xl transition-shadow duration-300 cursor-pointer mt-4 relative">
                        <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                            <img id="melna-rosary-card-image-mobile" src="./img/2.jpg" alt="Rosary"
                                class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">
                            <svg id="melna-rosary-plus-icon-mobile" xmlns="http://www.w3.org/2000/svg"
                                class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                            </svg>
                        </div>
                        <div class="flex flex-1 items-center justify-center">
                            <div id="melna-rosary-count-loading-mobile" class="hidden flex justify-center items-center">
                                <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                    fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                        stroke-width="4">
                                    </circle>
                                    <path class="opacity-75" fill="currentColor"
                                        d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"></path>
                                </svg>
                            </div>
                            <span id="melna-rosary-count-value-mobile" class="text-white text-5xl font-bold">0</span>
                        </div>
                    </div>
                    <!-- Melna Mercy Rosary Card (Mobile) -->
                    <div id="melna-mercy-rosary-count-card-mobile"
                        class="bg-gradient-to-r from-pink-400 to-pink-300 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full hover:shadow-xl transition-shadow duration-300 cursor-pointer relative mt-4">
                        <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                            <img id="melna-mercy-rosary-card-image-mobile" src="./img/3.jpg" alt="Mercy Rosary"
                                class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">
                            <svg id="melna-mercy-rosary-plus-icon-mobile" xmlns="http://www.w3.org/2000/svg"
                                class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                            </svg>
                        </div>
                        <div class="flex flex-1 items-center justify-center">
                            <div id="melna-mercy-rosary-count-loading-mobile"
                                class="hidden flex justify-center items-center">
                                <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                    fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                        stroke-width="4" />
                                    <path class="opacity-75" fill="currentColor"
                                        d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z" />
                                </svg>
                            </div>
                            <span id="melna-mercy-rosary-count-value-mobile"
                                class="text-white text-5xl font-bold">0</span>
                        </div>
                    </div>

                    <!-- Adoration Counter Card (Mobile) - Melna -->
                    <div id="melna-adoration-count-card-mobile"
                        class="bg-gradient-to-r from-green-400 to-green-300 rounded-2xl shadow-lg flex items-center px-4 py-3 w-full hover:shadow-xl transition-shadow duration-300 cursor-pointer mt-4 relative">

                        <!-- Image / Plus Icon Wrapper -->
                        <div class="flex-shrink-0 flex items-center justify-center relative w-20 h-20">
                            <img id="melna-adoration-card-image-mobile" src="./img/4.jpg" alt="Adoration"
                                class="w-20 h-20 rounded-xl object-cover shadow-sm transition-opacity duration-300">
                            <svg id="melna-adoration-plus-icon-mobile" xmlns="http://www.w3.org/2000/svg"
                                class="h-10 w-10 text-white absolute opacity-0 transition-opacity duration-300"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                            </svg>
                        </div>

                        <!-- Count -->
                        <div class="flex flex-1 items-center justify-center">
                            <div id="melna-adoration-count-loading-mobile"
                                class="hidden flex justify-center items-center">
                                <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                    fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                        stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor"
                                        d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"></path>
                                </svg>
                            </div>
                            <span id="melna-adoration-count-value-mobile" class="text-white text-5xl font-bold">0</span>
                        </div>
                    </div>



                </div>
            </div>

        </div>

        <!-- Navigation buttons OUTSIDE panels -->
        <div class="md:hidden pointer-events-none">
            <button id="prevBtn"
                class="absolute left-0 top-[85%] -translate-y-1/2 cursor-pointer arrow-bounce text-white opacity-80 hover:opacity-100 transition z-20 pointer-events-auto"
                aria-label="Previous Section">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
                </svg>
            </button>

            <button id="nextBtn"
                class="absolute right-0 top-[85%] -translate-y-1/2 cursor-pointer arrow-bounce text-white opacity-80 hover:opacity-100 transition z-20 pointer-events-auto"
                aria-label="Next Section">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                </svg>
            </button>
        </div>
    </section>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js";
        import {
            getFirestore,
            doc,
            getDoc,
            Timestamp
        } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore.js";

        const selectedDateText = document.getElementById("abhi-selected-date-text");
        const dateCard = document.getElementById("abhi-date-card");



        async function updateNextConfessionDisplay() {
            try {
                const ref = doc(db, "abhi", "confession");
                const snap = await getDoc(ref);

                if (!snap.exists()) {
                    selectedDateText.textContent = "No confession date found.";
                    return;
                }

                const data = snap.data();
                const nextConfessionRaw = data.next_confession_date;

                if (!nextConfessionRaw) {
                    selectedDateText.textContent = "Next confession date is missing.";
                    return;
                }

                const nextDate = new Date(nextConfessionRaw); // Convert to Date
                if (isNaN(nextDate)) {
                    selectedDateText.textContent = "Invalid confession date format.";
                    return;
                }

                const today = new Date();
                today.setHours(0, 0, 0, 0);
                nextDate.setHours(0, 0, 0, 0);

                const timeDiff = nextDate - today;
                const dayDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));

                const formatted = nextDate.toLocaleDateString("en-GB", {
                    day: "2-digit",
                    month: "short",
                    year: "numeric"
                });

                // üìä Severity color based on proximity
                function getConfessionColor(dayDiff) {
                    if (dayDiff < 0) return { bg: "bg-red-700", text: "text-white", icon: "‚ùå" };
                    if (dayDiff === 0) return { bg: "bg-red-600", text: "text-white", icon: "üîî" };
                    if (dayDiff === 1) return { bg: "bg-red-500", text: "text-white", icon: "‚ö†Ô∏è" };
                    if (dayDiff <= 3) return { bg: "bg-yellow-400", text: "text-black", icon: "‚è≥" };
                    return { bg: "bg-green-400", text: "text-black", icon: "üü¢" };
                }

                const { bg, text, icon } = getConfessionColor(dayDiff);

                // üìù Display dynamic message
                if (dayDiff < 0) {
                    selectedDateText.textContent = `${icon} Confession Missed! (${formatted})`;
                } else if (dayDiff === 0) {
                    selectedDateText.textContent = `${icon} Today is the Confession Day! (${formatted})`;
                } else {
                    selectedDateText.innerHTML = `${icon} Next Confession: ${formatted}<br>(${dayDiff}d left)`;

                }

                // üì± Responsive card styling (mobile-friendly)
                dateCard.className = `
                    ${bg} ${text}
                    rounded-2xl px-4 sm:px-6 py-4
                    w-full max-w-md mx-auto
                    text-center text-base sm:text-lg font-semibold font-sans tracking-wide
                    shadow-lg transition-all duration-300
                    ${dayDiff <= 1 ? "animate-pulse" : ""}
                `.replace(/\s+/g, ' ').trim();

            } catch (e) {
                console.error("‚ùå Firestore error:", e);
                selectedDateText.textContent = "Error loading date.";
            }
        }

        updateNextConfessionDisplay();
    </script>

    <script type="module">
        // Firebase already initialized in <head>
        import { doc, getDoc } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore.js";

        const selectedDateText = document.getElementById("melna-selected-date-text");
        const dateCard = document.getElementById("melna-date-card");

        // 1. Parsing helper
        function parseDateValue(raw) {
            if (!raw) return null;
            if (typeof raw === "object" && raw.seconds !== undefined) {
                return new Date(raw.seconds * 1000);
            }
            // ISO string parse
            const dt = Date.parse(raw); // safer than new Date(raw)
            return isNaN(dt) ? null : new Date(dt);
        }

        // 2. Function to update panel
        async function updateMelnaConfessionDisplay() {
            try {
                const snap = await getDoc(doc(db, "melna", "confession"));
                if (!snap.exists()) {
                    selectedDateText.textContent = "No confession data.";
                    return;
                }

                const rawDate = snap.data().next_confession_date;
                const nextDate = parseDateValue(rawDate);

                if (!nextDate) {
                    selectedDateText.textContent = "Oops ‚Äî invalid or missing date.";
                    return;
                }

                const today = new Date();
                today.setHours(0, 0, 0, 0);
                nextDate.setHours(0, 0, 0, 0);

                const diffDays = Math.floor((nextDate - today) / (1000 * 60 * 60 * 24));
                const formatted = nextDate.toLocaleDateString("en-GB", {
                    day: "2-digit", month: "short", year: "numeric"
                });

                const getColor = (d) => {
                    if (d < 0) return { bg: "bg-red-700", text: "text-white", icon: "‚ùå" };
                    if (d === 0) return { bg: "bg-red-600", text: "text-white", icon: "üîî" };
                    if (d === 1) return { bg: "bg-red-500", text: "text-white", icon: "‚ö†Ô∏è" };
                    if (d <= 3) return { bg: "bg-yellow-400", text: "text-black", icon: "‚è≥" };
                    return { bg: "bg-green-400", text: "text-black", icon: "üü¢" };
                };

                const { bg, text, icon } = getColor(diffDays);
                selectedDateText.innerHTML =
                    diffDays < 0
                        ? `${icon} Missed: ${formatted}<br>(${diffDays} days late)`
                        : diffDays === 0
                            ? `${icon} Today!<br>${formatted}`
                            : `${icon} Next Confession: ${formatted}<br>(${diffDays}d left)`;


                dateCard.className = `
            ${bg} ${text}
            rounded-2xl px-4 sm:px-6 py-4
            w-full max-w-md mx-auto
            text-center text-base sm:text-lg font-semibold font-sans tracking-wide
            shadow-lg transition-all duration-300
            ${diffDays <= 1 ? "animate-pulse" : ""}
          `.replace(/\s+/g, ' ').trim();

            } catch (err) {
                console.error("Firestore error:", err);
                selectedDateText.textContent = "Error loading date.";
            }
        }

        updateMelnaConfessionDisplay();
    </script>















    <!-- Calendar Section -->
    <section id="calendar-section" class="min-h-screen bg-gray-100 text-black flex flex-col items-center py-6 px-4">
        <div class="flex justify-center gap-6 p-6 bg-gray-100 rounded-3xl shadow-inner flex-wrap">

            <!-- Calendar 1: Abhi -->
            <div class="bg-white rounded-3xl p-6 shadow-lg w-80">
                <h2 class="text-center text-xl font-bold text-black mb-2">Abhi</h2>

                <!-- Month Header -->
                <div class="flex justify-between items-center text-black mb-4">
                    <button class="text-2xl hover:text-gray-800" id="prev-month">&larr;</button>
                    <div id="month-year" class="text-lg font-semibold">September 2025</div>
                    <button class="text-2xl hover:text-gray-800" id="next-month">&rarr;</button>
                </div>

                <!-- Weekdays -->
                <div class="grid grid-cols-7 gap-2 text-center text-sm font-medium text-gray-500 mb-2">
                    <div>S</div>
                    <div>M</div>
                    <div>T</div>
                    <div>W</div>
                    <div>T</div>
                    <div>F</div>
                    <div>S</div>
                </div>

                <!-- Dates Grid -->
                <div id="calendar-grid" class="grid grid-cols-7 gap-2 text-center black text-sm">
                    <!-- JS will populate this -->
                </div>

                <!-- Event Section -->
                <div class="mt-4 hidden" id="event-section">
                    <div class="bg-gray-700 rounded-xl p-4 shadow-inner">
                        <p class="text-sm text-black mb-2">Events on <span id="event-date" class="font-medium">September
                                12</span></p>
                        <div class="flex items-center justify-between">
                            <button
                                class="bg-blue-500 text-white rounded-full px-4 py-2 hover:bg-blue-600 text-sm">‚ûï</button>
                            <button
                                class="bg-green-500 text-white rounded-full px-4 py-2 hover:bg-green-600 text-sm">‚úîÔ∏è</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calendar 2: Person 2 -->
            <div class="bg-white rounded-3xl p-6 shadow-lg w-80">
                <h2 class="text-center text-xl font-bold text-black mb-2">Melna</h2>

                <!-- Month Header -->
                <div class="flex justify-between items-center text-black mb-4">
                    <button class="text-2xl hover:text-gray-800" id="prev-month-2">&larr;</button>
                    <div id="month-year-2" class="text-lg font-semibold">September 2025</div>
                    <button class="text-2xl hover:text-gray-800" id="next-month-2">&rarr;</button>
                </div>

                <!-- Weekdays -->
                <div class="grid grid-cols-7 gap-2 text-center text-sm font-medium text-gray-500 mb-2">
                    <div>S</div>
                    <div>M</div>
                    <div>T</div>
                    <div>W</div>
                    <div>T</div>
                    <div>F</div>
                    <div>S</div>
                </div>

                <!-- Dates Grid -->
                <div id="calendar-grid-2" class="grid grid-cols-7 gap-2 text-center black text-sm">
                    <!-- JS will populate this -->
                </div>

                <!-- Event Section -->
                <div class="mt-4 hidden" id="event-section-2">
                    <div class="bg-gray-700 rounded-xl p-4 shadow-inner">
                        <p class="text-sm text-black mb-2">Events on <span id="event-date-2"
                                class="font-medium">September
                                12</span></p>
                        <div class="flex items-center justify-between">
                            <button
                                class="bg-blue-500 text-white rounded-full px-4 py-2 hover:bg-blue-600 text-sm">‚ûï</button>
                            <button
                                class="bg-green-500 text-white rounded-full px-4 py-2 hover:bg-green-600 text-sm">‚úîÔ∏è</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </section>



    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const monthYearLabel = document.getElementById("month-year");
            const calendarGrid = document.getElementById("calendar-grid");
            const prevButton = document.getElementById("prev-month");
            const nextButton = document.getElementById("next-month");
            const eventSection = document.getElementById("event-section");
            const eventDateLabel = document.getElementById("event-date");

            // üíæ Sample events (expandable)
            const events = {
                "2025-08": [5, 12, 22],  // September 2025
                "2025-09": [3, 14],      // October 2025
                "2025-07": [11, 21],     // August 2025
            };

            const monthNames = [
                "January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"
            ];

            // üåü Init to today's date
            const today = new Date();
            let currentMonth = today.getMonth(); // 0-11
            let currentYear = today.getFullYear();

            function renderCalendar(month, year) {
                calendarGrid.innerHTML = "";

                const firstDay = new Date(year, month, 1).getDay(); // 0 = Sunday
                const daysInMonth = new Date(year, month + 1, 0).getDate();

                const isCurrentMonth =
                    month === today.getMonth() && year === today.getFullYear();
                const eventKey = `${year}-${month.toString().padStart(2, "0")}`;

                // Update header
                monthYearLabel.textContent = `${monthNames[month]} ${year}`;

                // Fill empty cells before the 1st
                for (let i = 0; i < firstDay; i++) {
                    const empty = document.createElement("div");
                    calendarGrid.appendChild(empty);
                }

                // Fill actual day cells
                for (let day = 1; day <= daysInMonth; day++) {
                    const cell = document.createElement("div");
                    cell.className = "relative z-10";
                    cell.textContent = day;
                    cell.style.cursor = "pointer";

                    // Today highlight
                    if (isCurrentMonth && day === today.getDate()) {
                        cell.classList.add("bg-yellow-100", "text-yellow-800", "rounded-full", "font-bold");
                    }

                    // Event dot
                    if (events[eventKey] && events[eventKey].includes(day)) {
                        const dot = document.createElement("div");
                        dot.className = "w-1 h-1 bg-red-400 rounded-full mx-auto mt-1";
                        cell.appendChild(dot);
                    }

                    // Click handling
                    cell.addEventListener("click", () => {
                        // Remove previous selection
                        [...calendarGrid.children].forEach(c =>
                            c.classList.remove("bg-blue-100", "text-blue-700", "rounded-full")
                        );

                        // Highlight selected
                        cell.classList.add("bg-blue-100", "text-blue-700", "rounded-full");

                        // Show event section
                        eventDateLabel.textContent = `${monthNames[month]} ${day}`;
                        eventSection.classList.remove("hidden");
                    });

                    calendarGrid.appendChild(cell);
                }
            }

            // üìÖ Init calendar to current month
            renderCalendar(currentMonth, currentYear);

            // ‚Üê Prev Month
            prevButton.addEventListener("click", () => {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                renderCalendar(currentMonth, currentYear);
            });

            // ‚Üí Next Month
            nextButton.addEventListener("click", () => {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                renderCalendar(currentMonth, currentYear);
            });
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const monthYearLabel2 = document.getElementById("month-year-2");
            const calendarGrid2 = document.getElementById("calendar-grid-2");
            const prevButton2 = document.getElementById("prev-month-2");
            const nextButton2 = document.getElementById("next-month-2");
            const eventSection2 = document.getElementById("event-section-2");
            const eventDateLabel2 = document.getElementById("event-date-2");

            // üíæ Sample events for person 2 (separate from person 1)
            const events2 = {
                "2025-08": [4, 15, 25],
                "2025-09": [5, 18],
                "2025-07": [7, 20],
            };

            const monthNames = [
                "January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"
            ];

            const today = new Date();
            let currentMonth2 = today.getMonth();
            let currentYear2 = today.getFullYear();

            function renderCalendar2(month, year) {
                calendarGrid2.innerHTML = "";

                const firstDay = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const isCurrentMonth =
                    month === today.getMonth() && year === today.getFullYear();
                const eventKey = `${year}-${month.toString().padStart(2, "0")}`;

                monthYearLabel2.textContent = `${monthNames[month]} ${year}`;

                for (let i = 0; i < firstDay; i++) {
                    const empty = document.createElement("div");
                    calendarGrid2.appendChild(empty);
                }

                for (let day = 1; day <= daysInMonth; day++) {
                    const cell = document.createElement("div");
                    cell.className = "relative z-10";
                    cell.textContent = day;
                    cell.style.cursor = "pointer";

                    if (isCurrentMonth && day === today.getDate()) {
                        cell.classList.add("bg-yellow-100", "text-yellow-800", "rounded-full", "font-bold");
                    }

                    if (events2[eventKey] && events2[eventKey].includes(day)) {
                        const dot = document.createElement("div");
                        dot.className = "w-1 h-1 bg-red-400 rounded-full mx-auto mt-1";
                        cell.appendChild(dot);
                    }

                    cell.addEventListener("click", () => {
                        [...calendarGrid2.children].forEach(c =>
                            c.classList.remove("bg-blue-100", "text-blue-700", "rounded-full")
                        );

                        cell.classList.add("bg-blue-100", "text-blue-700", "rounded-full");

                        eventDateLabel2.textContent = `${monthNames[month]} ${day}`;
                        eventSection2.classList.remove("hidden");
                    });

                    calendarGrid2.appendChild(cell);
                }
            }

            renderCalendar2(currentMonth2, currentYear2);

            prevButton2.addEventListener("click", () => {
                currentMonth2--;
                if (currentMonth2 < 0) {
                    currentMonth2 = 11;
                    currentYear2--;
                }
                renderCalendar2(currentMonth2, currentYear2);
            });

            nextButton2.addEventListener("click", () => {
                currentMonth2++;
                if (currentMonth2 > 11) {
                    currentMonth2 = 0;
                    currentYear2++;
                }
                renderCalendar2(currentMonth2, currentYear2);
            });
        });
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js";
        import {
            getFirestore,
            doc,
            getDoc,
            setDoc
        } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore.js";



        let selectedDate = new Date();
        let confessionData = null;

        const monthYearLabel = document.getElementById("month-year");
        const calendarGrid = document.getElementById("calendar-grid");
        const eventSection = document.getElementById("event-section");
        const eventDateLabel = document.getElementById("event-date");
        const confessButton = eventSection.querySelector("button:nth-child(2)");

        const monthNames = [
            "January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ];

        document.getElementById("prev-month").addEventListener("click", () => {
            selectedDate.setMonth(selectedDate.getMonth() - 1);
            renderCalendar();
        });

        document.getElementById("next-month").addEventListener("click", () => {
            selectedDate.setMonth(selectedDate.getMonth() + 1);
            renderCalendar();
        });

        confessButton.addEventListener("click", async () => {
            if (!eventDateLabel.textContent) return;

            const [monthName, day] = eventDateLabel.textContent.split(" ");
            const monthIndex = monthNames.indexOf(monthName);
            const year = selectedDate.getFullYear();

            const confessionDate = new Date(year, monthIndex, parseInt(day));
            const nextConfessionDate = new Date(confessionDate);
            nextConfessionDate.setDate(confessionDate.getDate() + 14);

            const confessionDoc = doc(db, "abhi", "confession");

            try {
                await setDoc(confessionDoc, {
                    confession_date: confessionDate.toISOString(),
                    next_confession_date: nextConfessionDate.toISOString()
                });

                confessionData = {
                    confession_date: confessionDate.toISOString(),
                    next_confession_date: nextConfessionDate.toISOString()
                };

                updateConfessionButton(true);
                renderCalendar();

            } catch (err) {
                alert("‚ùå Error saving confession.");
                console.error(err);
            }
        });

        function updateConfessionButton(isConfessed) {
            if (isConfessed) {
                confessButton.textContent = "‚úîÔ∏è Confessed!";
                confessButton.disabled = true;
                confessButton.classList.remove("bg-green-500", "hover:bg-green-600");
                confessButton.classList.add("bg-green-700", "cursor-not-allowed");
            } else {
                confessButton.textContent = "‚úîÔ∏è Mark as Confessed";
                confessButton.disabled = false;
                confessButton.classList.remove("bg-green-700", "cursor-not-allowed");
                confessButton.classList.add("bg-green-500", "hover:bg-green-600");
            }
        }

        async function fetchConfessionData() {
            const docRef = doc(db, "abhi", "confession");
            const snap = await getDoc(docRef);
            confessionData = snap.exists() ? snap.data() : null;
        }

        async function renderCalendar() {
            await fetchConfessionData();

            const year = selectedDate.getFullYear();
            const month = selectedDate.getMonth();

            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            calendarGrid.innerHTML = "";
            monthYearLabel.textContent = `${monthNames[month]} ${year}`;

            for (let i = 0; i < firstDay; i++) {
                calendarGrid.innerHTML += `<div></div>`;
            }

            const today = new Date();

            for (let d = 1; d <= daysInMonth; d++) {
                const current = new Date(year, month, d);
                const iso = current.toISOString().split("T")[0];

                let classList = "cursor-pointer p-1 rounded-full hover:bg-blue-100";

                if (current.toDateString() === today.toDateString()) {
                    classList += " ring-2 ring-blue-300 font-bold";
                }

                if (confessionData?.confession_date?.startsWith(iso)) {
                    classList += " bg-blue-200 text-blue-900 font-semibold";
                }

                if (confessionData?.next_confession_date?.startsWith(iso)) {
                    classList += " bg-green-200 text-green-800 font-semibold";
                }

                calendarGrid.innerHTML += `<div class="${classList}" data-day="${d}">${d}</div>`;
            }

            // Click handler to highlight selected date and show event section
            document.querySelectorAll("#calendar-grid > div").forEach(div => {
                const day = div.dataset.day;
                if (!day) return;

                div.addEventListener("click", () => {
                    // Remove previous selected highlight
                    document.querySelectorAll("#calendar-grid > div").forEach(el => {
                        el.classList.remove("selected-date", "bg-yellow-100", "ring-2", "ring-yellow-300");
                    });

                    // Apply highlight to selected
                    div.classList.add("selected-date", "bg-yellow-100", "ring-2", "ring-yellow-300");

                    // Update event section
                    eventDateLabel.textContent = `${monthNames[month]} ${day}`;
                    eventSection.classList.remove("hidden");

                    const selectedISO = new Date(year, month, day).toISOString().split("T")[0];
                    const confessed = confessionData?.confession_date?.startsWith(selectedISO);
                    updateConfessionButton(confessed);
                });
            });
        }

        renderCalendar();
    </script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js";
        import {
            getFirestore,
            doc,
            getDoc,
            setDoc
        } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore.js";



        let selectedDate2 = new Date();
        let confessionData2 = null;

        const monthYearLabel2 = document.getElementById("month-year-2");
        const calendarGrid2 = document.getElementById("calendar-grid-2");
        const eventSection2 = document.getElementById("event-section-2");
        const eventDateLabel2 = document.getElementById("event-date-2");
        const confessButton2 = eventSection2.querySelector("button:nth-child(2)");

        const monthNames = [
            "January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ];

        document.getElementById("prev-month-2").addEventListener("click", () => {
            selectedDate2.setMonth(selectedDate2.getMonth() - 1);
            renderCalendar2();
        });

        document.getElementById("next-month-2").addEventListener("click", () => {
            selectedDate2.setMonth(selectedDate2.getMonth() + 1);
            renderCalendar2();
        });

        confessButton2.addEventListener("click", async () => {
            if (!eventDateLabel2.textContent) return;

            const [monthName, day] = eventDateLabel2.textContent.split(" ");
            const monthIndex = monthNames.indexOf(monthName);
            const year = selectedDate2.getFullYear();

            const confessionDate = new Date(year, monthIndex, parseInt(day));
            const nextConfessionDate = new Date(confessionDate);
            nextConfessionDate.setDate(confessionDate.getDate() + 14);

            const confessionDoc = doc(db, "melna", "confession");

            try {
                await setDoc(confessionDoc, {
                    confession_date: confessionDate.toISOString(),
                    next_confession_date: nextConfessionDate.toISOString()
                });

                confessionData2 = {
                    confession_date: confessionDate.toISOString(),
                    next_confession_date: nextConfessionDate.toISOString()
                };

                updateConfessionButton2(true);
                renderCalendar2();

            } catch (err) {
                alert("‚ùå Error saving confession.");
                console.error(err);
            }
        });

        function updateConfessionButton2(isConfessed) {
            if (isConfessed) {
                confessButton2.textContent = "‚úîÔ∏è Confessed!";
                confessButton2.disabled = true;
                confessButton2.classList.remove("bg-green-500", "hover:bg-green-600");
                confessButton2.classList.add("bg-green-700", "cursor-not-allowed");
            } else {
                confessButton2.textContent = "‚úîÔ∏è Mark as Confessed";
                confessButton2.disabled = false;
                confessButton2.classList.remove("bg-green-700", "cursor-not-allowed");
                confessButton2.classList.add("bg-green-500", "hover:bg-green-600");
            }
        }

        async function fetchConfessionData2() {
            const docRef = doc(db, "melna", "confession");
            const snap = await getDoc(docRef);
            confessionData2 = snap.exists() ? snap.data() : null;
        }

        async function renderCalendar2() {
            await fetchConfessionData2();

            const year = selectedDate2.getFullYear();
            const month = selectedDate2.getMonth();

            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            calendarGrid2.innerHTML = "";
            monthYearLabel2.textContent = `${monthNames[month]} ${year}`;

            for (let i = 0; i < firstDay; i++) {
                calendarGrid2.innerHTML += `<div></div>`;
            }

            const today = new Date();

            for (let d = 1; d <= daysInMonth; d++) {
                const current = new Date(year, month, d);
                const iso = current.toISOString().split("T")[0];

                let classList = "cursor-pointer p-1 rounded-full hover:bg-blue-100";

                if (current.toDateString() === today.toDateString()) {
                    classList += " ring-2 ring-blue-300 font-bold";
                }

                if (confessionData2?.confession_date?.startsWith(iso)) {
                    classList += " bg-blue-200 text-blue-900 font-semibold";
                }

                if (confessionData2?.next_confession_date?.startsWith(iso)) {
                    classList += " bg-green-200 text-green-800 font-semibold";
                }

                calendarGrid2.innerHTML += `<div class="${classList}" data-day="${d}">${d}</div>`;
            }

            document.querySelectorAll("#calendar-grid-2 > div").forEach(div => {
                const day = div.dataset.day;
                if (!day) return;

                div.addEventListener("click", () => {
                    document.querySelectorAll("#calendar-grid-2 > div").forEach(el => {
                        el.classList.remove("selected-date", "bg-yellow-100", "ring-2", "ring-yellow-300");
                    });

                    div.classList.add("selected-date", "bg-yellow-100", "ring-2", "ring-yellow-300");

                    eventDateLabel2.textContent = `${monthNames[month]} ${day}`;
                    eventSection2.classList.remove("hidden");

                    const selectedISO = new Date(year, month, day).toISOString().split("T")[0];
                    const confessed = confessionData2?.confession_date?.startsWith(selectedISO);
                    updateConfessionButton2(confessed);
                });
            });
        }

        renderCalendar2();
    </script>








    <!-- Script for softer adaptive text color -->
    <script>
        function adjustTextColorSmooth() {
            const textElements = document.querySelectorAll("h1, p");

            textElements.forEach(el => {
                // Find nearest gradient background
                let parentBg = null;
                let parent = el.closest(".gradient-bg");

                if (parent) {
                    parentBg = window.getComputedStyle(parent).backgroundColor;
                } else {
                    parentBg = window.getComputedStyle(document.body).backgroundColor;
                }

                // Extract RGB values
                const rgbMatch = parentBg.match(/\d+/g);
                const rgb = rgbMatch ? rgbMatch.map(Number) : [255, 255, 255];

                // Calculate perceived brightness
                const brightness = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;

                let shade, textShadow;

                if (brightness > 180) {
                    // Very light ‚Üí soft dark text
                    shade = "rgba(50, 50, 50, 0.95)";
                    textShadow = "0 2px 6px rgba(0,0,0,0.15)";
                }
                else if (brightness > 130) {
                    // Medium ‚Üí darker text
                    shade = "rgba(30, 30, 30, 0.95)";
                    textShadow = "0 2px 8px rgba(0,0,0,0.2)";
                }
                else {
                    // Dark ‚Üí soft glowing light text
                    shade = "rgba(255, 255, 255, 0.95)";
                    textShadow = `
                0 0 8px rgba(255, 192, 203, 0.4),
                0 0 16px rgba(255, 192, 203, 0.2)
            `;
                }

                // Apply styles
                el.style.color = shade;
                el.style.textShadow = textShadow;
            });
        }

        // Adjust every 300ms for smooth changes
        setInterval(adjustTextColorSmooth, 200);

        const panels = document.getElementById("mobilePanels");
        let index = 0;

        function updatePanels() {
            panels.style.transform = `translateX(-${index * 100}%)`;
        }

        document.getElementById("prevBtn").addEventListener("click", () => {
            index = (index - 1 + 2) % 2;
            updatePanels();
        });

        document.getElementById("nextBtn").addEventListener("click", () => {
            index = (index + 1) % 2;
            updatePanels();
        });
    </script>

    <!-- a holy mass -->
    <script type="module">
        const { doc, getDoc, updateDoc } = window.firebaseFns;

        function setupCounter(cardId, imageId, plusIconId, loadingId, valueId, localKey, firebaseDocName, collectionName) {
            const card = document.getElementById(cardId);
            const image = document.getElementById(imageId);
            const plusIcon = document.getElementById(plusIconId);
            const loadingSpinner = document.getElementById(loadingId);
            const countValue = document.getElementById(valueId);

            if (!card || !plusIcon) return;

            let count = 0;
            let mobileFirstTap = true;

            function showLoading() {
                loadingSpinner.classList.remove("hidden");
                countValue.classList.add("hidden");
            }

            function showCount(value) {
                countValue.textContent = value;
                loadingSpinner.classList.add("hidden");
                countValue.classList.remove("hidden");
            }

            function setCountColor(color) {
                countValue.style.color = color;
            }

            // Show loading initially
            showLoading();

            // Load from Local Storage
            if (localStorage.getItem(localKey)) {
                count = parseInt(localStorage.getItem(localKey), 10);
                showCount(count);
            }

            // Load from Firebase
            async function loadFromFirebase() {
                const ref = doc(window.db, collectionName, firebaseDocName);
                try {
                    const snapshot = await getDoc(ref);
                    if (snapshot.exists()) {
                        count = snapshot.data().value || 0;
                        localStorage.setItem(localKey, count);
                        showCount(count);
                    } else {
                        showCount(0);
                    }
                } catch (err) {
                    console.error("Error fetching from Firebase:", err);
                    showCount(count || 0);
                }
            }
            loadFromFirebase();

            // Save to Firebase
            async function saveToFirebase(newCount) {
                const ref = doc(window.db, collectionName, firebaseDocName);
                try {
                    await updateDoc(ref, { value: newCount });
                    setCountColor("#34D399"); // green flash
                    setTimeout(() => setCountColor("white"), 1000);
                } catch (err) {
                    console.error("Error saving to Firebase:", err);
                    setCountColor("red");
                }
            }

            // Desktop hover effects
            if (window.matchMedia("(hover: hover)").matches) {
                card.addEventListener("mouseenter", () => {
                    image.style.opacity = "0.2";
                    plusIcon.style.opacity = "1";
                });
                card.addEventListener("mouseleave", () => {
                    image.style.opacity = "1";
                    plusIcon.style.opacity = "0";
                });

                // Increment only when clicking the plus icon
                plusIcon.addEventListener("click", (event) => {
                    event.stopPropagation();
                    count++;
                    showCount(count);
                    localStorage.setItem(localKey, count);
                    setCountColor("#F59E0B");
                    saveToFirebase(count);
                });
            }
            // Mobile/touch devices
            else {
                plusIcon.addEventListener("click", (event) => {
                    event.stopPropagation();
                    if (mobileFirstTap) {
                        // First tap: just show plus icon (already visible on tap)
                        image.style.opacity = "0.2";
                        plusIcon.style.opacity = "1";
                        mobileFirstTap = false;

                        setTimeout(() => {
                            image.style.opacity = "1";
                            plusIcon.style.opacity = "0";
                            mobileFirstTap = true;
                        }, 3000);
                    } else {
                        // Second tap: increment
                        count++;
                        showCount(count);
                        localStorage.setItem(localKey, count);
                        setCountColor("#F59E0B");
                        saveToFirebase(count);

                        image.style.opacity = "1";
                        plusIcon.style.opacity = "0";
                        mobileFirstTap = true;
                    }
                });
            }
        }

        // Abhi's counters
        setupCounter(
            "count-card",
            "card-image",
            "plus-icon",
            "count-loading",
            "count-value",
            "holy_mass_count",
            "holy mass",
            "abhi"
        );
        setupCounter(
            "count-card-mobile",
            "card-image-mobile",
            "plus-icon-mobile",
            "count-loading-mobile",
            "count-value-mobile",
            "holy_mass_count",
            "holy mass",
            "abhi"
        );

    </script>

    <!-- m holy mass -->
    <script type="module">
        const { doc, getDoc, updateDoc } = window.firebaseFns;

        function setupCounter(cardId, imageId, plusIconId, loadingId, valueId, localKey, firebaseDocName, collectionName) {
            const card = document.getElementById(cardId);
            const image = document.getElementById(imageId);
            const plusIcon = document.getElementById(plusIconId);
            const loadingSpinner = document.getElementById(loadingId);
            const countValue = document.getElementById(valueId);

            if (!card || !plusIcon) return;

            let count = 0;
            let mobileFirstTap = true;

            function showLoading() {
                loadingSpinner.classList.remove("hidden");
                countValue.classList.add("hidden");
            }

            function showCount(value) {
                countValue.textContent = value;
                loadingSpinner.classList.add("hidden");
                countValue.classList.remove("hidden");
            }

            function setCountColor(color) {
                countValue.style.color = color;
            }

            // Show loading initially
            showLoading();

            // Load from Local Storage
            if (localStorage.getItem(localKey)) {
                count = parseInt(localStorage.getItem(localKey), 10);
                showCount(count);
            }

            // Load from Firebase
            async function loadFromFirebase() {
                const ref = doc(window.db, collectionName, firebaseDocName);
                try {
                    const snapshot = await getDoc(ref);
                    if (snapshot.exists()) {
                        count = snapshot.data().value || 0;
                        localStorage.setItem(localKey, count);
                        showCount(count);
                    } else {
                        showCount(0);
                    }
                } catch (err) {
                    console.error("Error fetching from Firebase:", err);
                    showCount(count || 0);
                }
            }
            loadFromFirebase();

            // Save to Firebase
            async function saveToFirebase(newCount) {
                const ref = doc(window.db, collectionName, firebaseDocName);
                try {
                    await updateDoc(ref, { value: newCount });
                    setCountColor("#34D399"); // green flash
                    setTimeout(() => setCountColor("white"), 1000);
                } catch (err) {
                    console.error("Error saving to Firebase:", err);
                    setCountColor("red");
                }
            }

            // Desktop hover effects
            if (window.matchMedia("(hover: hover)").matches) {
                card.addEventListener("mouseenter", () => {
                    image.style.opacity = "0.2";
                    plusIcon.style.opacity = "1";
                });
                card.addEventListener("mouseleave", () => {
                    image.style.opacity = "1";
                    plusIcon.style.opacity = "0";
                });

                // Increment only when clicking the plus icon
                plusIcon.addEventListener("click", (event) => {
                    event.stopPropagation();
                    count++;
                    showCount(count);
                    localStorage.setItem(localKey, count);
                    setCountColor("#F59E0B");
                    saveToFirebase(count);
                });
            }
            // Mobile/touch devices (two-tap logic like Abhi)
            else {
                plusIcon.addEventListener("click", (event) => {
                    event.stopPropagation();
                    if (mobileFirstTap) {
                        // First tap: show plus icon only
                        image.style.opacity = "0.2";
                        plusIcon.style.opacity = "1";
                        mobileFirstTap = false;

                        // Reset after 3 seconds if no second tap
                        setTimeout(() => {
                            image.style.opacity = "1";
                            plusIcon.style.opacity = "0";
                            mobileFirstTap = true;
                        }, 3000);
                    } else {
                        // Second tap: increment
                        count++;
                        showCount(count);
                        localStorage.setItem(localKey, count);
                        setCountColor("#F59E0B");
                        saveToFirebase(count);

                        image.style.opacity = "1";
                        plusIcon.style.opacity = "0";
                        mobileFirstTap = true;
                    }
                });
            }
        }

        // Melna's counters
        setupCounter(
            "melna-count-card",
            "melna-card-image",
            "melna-plus-icon",
            "melna-count-loading",
            "melna-count-value",
            "melna_mass_count",
            "holy mass",
            "melna"
        );
        setupCounter(
            "melna-count-card-mobile",
            "melna-card-image-mobile",
            "melna-plus-icon-mobile",
            "melna-count-loading-mobile",
            "melna-count-value-mobile",
            "melna_mass_count",
            "holy mass",
            "melna"
        );
    </script>
    <!-- a rossary -->
    <script type="module">
        const { doc, getDoc, updateDoc } = window.firebaseFns;
        const db = window.db;

        function setupCounter(cardId, imageId, plusIconId, loadingId, valueId, localKey, firebaseDocName, collectionName) {
            const card = document.getElementById(cardId);
            const image = document.getElementById(imageId);
            const plusIcon = document.getElementById(plusIconId);
            const loadingSpinner = document.getElementById(loadingId);
            const countValue = document.getElementById(valueId);

            let count = 0;
            let mobileFirstTap = true;

            function showLoading() {
                loadingSpinner.classList.remove("hidden");
                countValue.classList.add("hidden");
            }

            function showCount(value) {
                countValue.textContent = value;
                loadingSpinner.classList.add("hidden");
                countValue.classList.remove("hidden");
            }

            function setCountColor(color) {
                countValue.style.color = color;
            }

            // Show loading initially
            showLoading();

            // Load from Local Storage
            if (localStorage.getItem(localKey)) {
                count = parseInt(localStorage.getItem(localKey), 10);
                showCount(count);
            }

            // Load from Firebase
            async function loadFromFirebase() {
                const ref = doc(db, collectionName, firebaseDocName);
                try {
                    const snapshot = await getDoc(ref);
                    if (snapshot.exists()) {
                        count = snapshot.data().count || 0;
                        localStorage.setItem(localKey, count);
                        showCount(count);
                    } else {
                        showCount(0);
                    }
                } catch (err) {
                    console.error("Error fetching from Firebase:", err);
                    showCount(count || 0);
                }
            }
            loadFromFirebase();

            // Save to Firebase
            async function saveToFirebase(newCount) {
                const ref = doc(db, collectionName, firebaseDocName);
                try {
                    await updateDoc(ref, { count: newCount });
                    setCountColor("#34D399"); // green on success
                    setTimeout(() => setCountColor("white"), 1000);
                } catch (err) {
                    console.error("Error saving to Firebase:", err);
                    setCountColor("red");
                }
            }

            // Event bindings (works for both desktop & mobile)
            plusIcon.addEventListener("click", (event) => {
                event.stopPropagation();

                // Mobile double-tap behavior
                if (!window.matchMedia("(hover: hover)").matches) {
                    if (mobileFirstTap) {
                        image.style.opacity = "0.2";
                        plusIcon.style.opacity = "1";
                        mobileFirstTap = false;

                        setTimeout(() => {
                            image.style.opacity = "1";
                            plusIcon.style.opacity = "0";
                            mobileFirstTap = true;
                        }, 3000);
                        return;
                    }
                }

                // Increment
                count++;
                showCount(count);
                localStorage.setItem(localKey, count);
                setCountColor("#F59E0B"); // orange while saving
                saveToFirebase(count);

                // Reset visuals
                image.style.opacity = "1";
                plusIcon.style.opacity = "0";
                mobileFirstTap = true;
            });

            // Hover effect for desktop
            if (window.matchMedia("(hover: hover)").matches) {
                card.addEventListener("mouseenter", () => {
                    image.style.opacity = "0.2";
                    plusIcon.style.opacity = "1";
                });
                card.addEventListener("mouseleave", () => {
                    image.style.opacity = "1";
                    plusIcon.style.opacity = "0";
                });
            }
        }

        // ‚úÖ Rosary counter setup (desktop)
        setupCounter(
            "rosary-count-card",
            "rosary-card-image",
            "rosary-plus-icon",
            "rosary-count-loading",
            "rosary-count-value",
            "rosary_count",
            "rossary", // Firestore doc name
            "abhi"     // Firestore collection name
        );

        // ‚úÖ Rosary counter setup (mobile)
        setupCounter(
            "rosary-count-card-mobile",
            "rosary-card-image-mobile",
            "rosary-plus-icon-mobile",
            "rosary-count-loading-mobile",
            "rosary-count-value-mobile",
            "rosary_count",
            "rossary",
            "abhi"
        );
    </script>
    <!-- m rossary -->
    <script type="module">
        const { doc, getDoc, updateDoc } = window.firebaseFns;
        const db = window.db;

        function setupCounter(cardId, imageId, plusIconId, loadingId, valueId, localKey, firebaseDocName, collectionName) {
            const card = document.getElementById(cardId);
            const image = document.getElementById(imageId);
            const plusIcon = document.getElementById(plusIconId);
            const loadingSpinner = document.getElementById(loadingId);
            const countValue = document.getElementById(valueId);

            let count = 0;
            let mobileFirstTap = true;

            function showLoading() {
                loadingSpinner.classList.remove("hidden");
                countValue.classList.add("hidden");
            }

            function showCount(value) {
                countValue.textContent = value;
                loadingSpinner.classList.add("hidden");
                countValue.classList.remove("hidden");
            }

            function setCountColor(color) {
                countValue.style.color = color;
            }

            // Show loading initially
            showLoading();

            // Load from Local Storage
            if (localStorage.getItem(localKey)) {
                count = parseInt(localStorage.getItem(localKey), 10);
                showCount(count);
            }

            // Load from Firebase
            async function loadFromFirebase() {
                const ref = doc(db, collectionName, firebaseDocName);
                try {
                    const snapshot = await getDoc(ref);
                    if (snapshot.exists()) {
                        count = snapshot.data().count || 0;
                        localStorage.setItem(localKey, count);
                        showCount(count);
                    } else {
                        showCount(0);
                    }
                } catch (err) {
                    console.error("Error fetching from Firebase:", err);
                    showCount(count || 0);
                }
            }
            loadFromFirebase();

            // Save to Firebase
            async function saveToFirebase(newCount) {
                const ref = doc(db, collectionName, firebaseDocName);
                try {
                    await updateDoc(ref, { count: newCount });
                    setCountColor("#34D399"); // green on success
                    setTimeout(() => setCountColor("white"), 1000);
                } catch (err) {
                    console.error("Error saving to Firebase:", err);
                    setCountColor("red");
                }
            }

            // Event bindings (works for both desktop & mobile)
            plusIcon.addEventListener("click", (event) => {
                event.stopPropagation();

                // Mobile double-tap behavior
                if (!window.matchMedia("(hover: hover)").matches) {
                    if (mobileFirstTap) {
                        image.style.opacity = "0.2";
                        plusIcon.style.opacity = "1";
                        mobileFirstTap = false;

                        setTimeout(() => {
                            image.style.opacity = "1";
                            plusIcon.style.opacity = "0";
                            mobileFirstTap = true;
                        }, 3000);
                        return;
                    }
                }

                // Increment
                count++;
                showCount(count);
                localStorage.setItem(localKey, count);
                setCountColor("#F59E0B"); // orange while saving
                saveToFirebase(count);

                // Reset visuals
                image.style.opacity = "1";
                plusIcon.style.opacity = "0";
                mobileFirstTap = true;
            });

            // Hover effect for desktop
            if (window.matchMedia("(hover: hover)").matches) {
                card.addEventListener("mouseenter", () => {
                    image.style.opacity = "0.2";
                    plusIcon.style.opacity = "1";
                });
                card.addEventListener("mouseleave", () => {
                    image.style.opacity = "1";
                    plusIcon.style.opacity = "0";
                });
            }
        }

        // ‚úÖ Melna Rosary counter setup (desktop)
        setupCounter(
            "melna-rosary-count-card",        // Card ID (desktop)
            "melna-rosary-card-image",        // Image ID
            "melna-rosary-plus-icon",         // Plus icon ID
            "melna-rosary-count-loading",     // Loading spinner ID
            "melna-rosary-count-value",       // Value text ID
            "melna_rosary_count",             // LocalStorage key
            "rossary",                        // Firestore doc name
            "melna"                           // Firestore collection name
        );

        // ‚úÖ Melna Rosary counter setup (mobile)
        setupCounter(
            "melna-rosary-count-card-mobile", // Card ID (mobile)
            "melna-rosary-card-image-mobile", // Image ID
            "melna-rosary-plus-icon-mobile",  // Plus icon ID
            "melna-rosary-count-loading-mobile", // Loading spinner ID
            "melna-rosary-count-value-mobile",   // Value text ID
            "melna_rosary_count",              // LocalStorage key
            "rossary",                         // Firestore doc name
            "melna"                            // Firestore collection name
        );
    </script>
    <!-- a mercy rossary -->
    <script type="module">
        const { doc, getDoc, updateDoc, setDoc } = window.firebaseFns;

        function setupCounter(cardId, imageId, plusIconId, loadingId, valueId, localKey, firebaseDocName, collectionName) {
            const card = document.getElementById(cardId);
            const image = document.getElementById(imageId);
            const plusIcon = document.getElementById(plusIconId);
            const loadingSpinner = document.getElementById(loadingId);
            const countValue = document.getElementById(valueId);

            if (!card || !plusIcon) return;

            let count = 0;
            let mobileFirstTap = true;

            function showLoading() {
                loadingSpinner.classList.remove("hidden");
                countValue.classList.add("hidden");
            }

            function showCount(value) {
                countValue.textContent = value;
                loadingSpinner.classList.add("hidden");
                countValue.classList.remove("hidden");
            }

            function setCountColor(color) {
                countValue.style.color = color;
            }

            // Show loading initially
            showLoading();

            // Load from Local Storage
            if (localStorage.getItem(localKey)) {
                count = parseInt(localStorage.getItem(localKey), 10);
                showCount(count);
            }

            // Load from Firebase
            async function loadFromFirebase() {
                const ref = doc(window.db, collectionName, firebaseDocName);
                try {
                    const snapshot = await getDoc(ref);
                    if (snapshot.exists()) {
                        count = snapshot.data().value || 0;
                        localStorage.setItem(localKey, count);
                        showCount(count);
                    } else {
                        showCount(0);
                    }
                } catch (err) {
                    console.error("Error fetching from Firebase:", err);
                    showCount(count || 0);
                }
            }
            loadFromFirebase();

            // Save to Firebase (with fallback)
            async function saveToFirebase(newCount) {
                const ref = doc(window.db, collectionName, firebaseDocName);
                try {
                    await updateDoc(ref, { value: newCount });
                    setCountColor("#34D399"); // green flash
                    setTimeout(() => setCountColor("white"), 1000);
                } catch (err) {
                    console.warn("updateDoc failed, trying setDoc...", err);
                    try {
                        await setDoc(ref, { value: newCount }); // create doc if missing
                        setCountColor("#34D399");
                        setTimeout(() => setCountColor("white"), 1000);
                    } catch (e) {
                        console.error("setDoc failed", e);
                        setCountColor("red");
                    }
                }
            }

            // Desktop hover
            if (window.matchMedia("(hover: hover)").matches) {
                card.addEventListener("mouseenter", () => {
                    image.style.opacity = "0.2";
                    plusIcon.style.opacity = "1";
                });
                card.addEventListener("mouseleave", () => {
                    image.style.opacity = "1";
                    plusIcon.style.opacity = "0";
                });

                plusIcon.addEventListener("click", (event) => {
                    event.stopPropagation();
                    count++;
                    showCount(count);
                    localStorage.setItem(localKey, count);
                    setCountColor("#F59E0B");
                    saveToFirebase(count);
                });
            }
            // Mobile touch devices
            else {
                plusIcon.addEventListener("click", (event) => {
                    event.stopPropagation();
                    if (mobileFirstTap) {
                        image.style.opacity = "0.2";
                        plusIcon.style.opacity = "1";
                        mobileFirstTap = false;

                        setTimeout(() => {
                            image.style.opacity = "1";
                            plusIcon.style.opacity = "0";
                            mobileFirstTap = true;
                        }, 3000);
                    } else {
                        count++;
                        showCount(count);
                        localStorage.setItem(localKey, count);
                        setCountColor("#F59E0B");
                        saveToFirebase(count);

                        image.style.opacity = "1";
                        plusIcon.style.opacity = "0";
                        mobileFirstTap = true;
                    }
                });
            }
        }

        // Mercy Rosary Counters (Abhi)
        setupCounter(
            "mercy-rosary-count-card",
            "mercy-rosary-image",
            "mercy-rosary-plus-icon",
            "mercy-rosary-loading",
            "mercy-rosary-count-value",
            "mercy_rosary_count",
            "mercy rossary", // Firestore doc name
            "abhi"
        );

        setupCounter(
            "mercy-rosary-count-card-mobile",
            "mercy-rosary-card-image-mobile",
            "mercy-rosary-plus-icon-mobile",
            "mercy-rosary-count-loading-mobile",
            "mercy-rosary-count-value-mobile",
            "mercy_rosary_count",
            "mercy rossary", // Firestore doc name
            "abhi"
        );
    </script>

    <!-- Melna Mercy Rosary -->
    <script type="module">
        const { doc, getDoc, updateDoc, setDoc } = window.firebaseFns;

        function setupCounter(cardId, imageId, plusIconId, loadingId, valueId, localKey, firebaseDocName, collectionName) {
            const card = document.getElementById(cardId);
            const image = document.getElementById(imageId);
            const plusIcon = document.getElementById(plusIconId);
            const loadingSpinner = document.getElementById(loadingId);
            const countValue = document.getElementById(valueId);

            if (!card || !plusIcon) return;

            let count = 0;
            let mobileFirstTap = true;

            function showLoading() {
                loadingSpinner.classList.remove("hidden");
                countValue.classList.add("hidden");
            }

            function showCount(value) {
                countValue.textContent = value;
                loadingSpinner.classList.add("hidden");
                countValue.classList.remove("hidden");
            }

            function setCountColor(color) {
                countValue.style.color = color;
            }

            // Show loading initially
            showLoading();

            // Load from Local Storage
            if (localStorage.getItem(localKey)) {
                count = parseInt(localStorage.getItem(localKey), 10);
                showCount(count);
            }

            // Load from Firebase
            async function loadFromFirebase() {
                const ref = doc(window.db, collectionName, firebaseDocName);
                try {
                    const snapshot = await getDoc(ref);
                    if (snapshot.exists()) {
                        count = snapshot.data().value || 0;
                        localStorage.setItem(localKey, count);
                        showCount(count);
                    } else {
                        showCount(0);
                    }
                } catch (err) {
                    console.error("Error fetching from Firebase:", err);
                    showCount(count || 0);
                }
            }
            loadFromFirebase();

            // Save to Firebase (with fallback)
            async function saveToFirebase(newCount) {
                const ref = doc(window.db, collectionName, firebaseDocName);
                try {
                    await updateDoc(ref, { value: newCount });
                    setCountColor("#34D399"); // green flash
                    setTimeout(() => setCountColor("white"), 1000);
                } catch (err) {
                    console.warn("updateDoc failed, trying setDoc...", err);
                    try {
                        await setDoc(ref, { value: newCount }); // create doc if missing
                        setCountColor("#34D399");
                        setTimeout(() => setCountColor("white"), 1000);
                    } catch (e) {
                        console.error("setDoc failed", e);
                        setCountColor("red");
                    }
                }
            }

            // Desktop hover
            if (window.matchMedia("(hover: hover)").matches) {
                card.addEventListener("mouseenter", () => {
                    image.style.opacity = "0.2";
                    plusIcon.style.opacity = "1";
                });
                card.addEventListener("mouseleave", () => {
                    image.style.opacity = "1";
                    plusIcon.style.opacity = "0";
                });

                plusIcon.addEventListener("click", (event) => {
                    event.stopPropagation();
                    count++;
                    showCount(count);
                    localStorage.setItem(localKey, count);
                    setCountColor("#F59E0B");
                    saveToFirebase(count);
                });
            }
            // Mobile touch devices
            else {
                plusIcon.addEventListener("click", (event) => {
                    event.stopPropagation();
                    if (mobileFirstTap) {
                        image.style.opacity = "0.2";
                        plusIcon.style.opacity = "1";
                        mobileFirstTap = false;

                        setTimeout(() => {
                            image.style.opacity = "1";
                            plusIcon.style.opacity = "0";
                            mobileFirstTap = true;
                        }, 3000);
                    } else {
                        count++;
                        showCount(count);
                        localStorage.setItem(localKey, count);
                        setCountColor("#F59E0B");
                        saveToFirebase(count);

                        image.style.opacity = "1";
                        plusIcon.style.opacity = "0";
                        mobileFirstTap = true;
                    }
                });
            }
        }

        // Mercy Rosary Counters (Melna)
        setupCounter(
            "melna-mercy-rosary-count-card",
            "melna-mercy-rosary-image",
            "melna-mercy-rosary-plus-icon",
            "melna-mercy-rosary-loading",
            "melna-mercy-rosary-count-value",
            "melna_mercy_rosary_count",
            "mercy rossary", // Firestore doc name
            "melna"
        );

        setupCounter(
            "melna-mercy-rosary-count-card-mobile",
            "melna-mercy-rosary-card-image-mobile",
            "melna-mercy-rosary-plus-icon-mobile",
            "melna-mercy-rosary-count-loading-mobile",
            "melna-mercy-rosary-count-value-mobile",
            "melna_mercy_rosary_count",
            "mercy rossary", // Firestore doc name
            "melna"
        );
    </script>


    <!-- Adoration Counter Script for Abhi -->
    <script type="module">
        const { doc, getDoc, updateDoc } = window.firebaseFns;

        function setupCounter(cardId, imageId, plusIconId, loadingId, valueId, localKey, firebaseDocName, collectionName) {
            const card = document.getElementById(cardId);
            const image = document.getElementById(imageId);
            const plusIcon = document.getElementById(plusIconId);
            const loadingSpinner = document.getElementById(loadingId);
            const countValue = document.getElementById(valueId);

            if (!card || !plusIcon) return;

            let count = 0;
            let mobileFirstTap = true;

            function showLoading() {
                loadingSpinner.classList.remove("hidden");
                countValue.classList.add("hidden");
            }

            function showCount(value) {
                countValue.textContent = value;
                loadingSpinner.classList.add("hidden");
                countValue.classList.remove("hidden");
            }

            function setCountColor(color) {
                countValue.style.color = color;
            }

            // Show loading initially
            showLoading();

            // Load from Local Storage
            if (localStorage.getItem(localKey)) {
                count = parseInt(localStorage.getItem(localKey), 10);
                showCount(count);
            }

            // Load from Firebase
            async function loadFromFirebase() {
                const ref = doc(window.db, collectionName, firebaseDocName);
                try {
                    const snapshot = await getDoc(ref);
                    if (snapshot.exists()) {
                        count = snapshot.data().value || 0;
                        localStorage.setItem(localKey, count);
                        showCount(count);
                    } else {
                        showCount(0);
                    }
                } catch (err) {
                    console.error("Error fetching from Firebase:", err);
                    showCount(count || 0);
                }
            }
            loadFromFirebase();

            // Save to Firebase
            async function saveToFirebase(newCount) {
                const ref = doc(window.db, collectionName, firebaseDocName);
                try {
                    await updateDoc(ref, { value: newCount });
                    setCountColor("#34D399"); // green flash
                    setTimeout(() => setCountColor("white"), 1000);
                } catch (err) {
                    console.error("Error saving to Firebase:", err);
                    setCountColor("red");
                }
            }

            // Desktop hover effects
            if (window.matchMedia("(hover: hover)").matches) {
                card.addEventListener("mouseenter", () => {
                    image.style.opacity = "0.2";
                    plusIcon.style.opacity = "1";
                });
                card.addEventListener("mouseleave", () => {
                    image.style.opacity = "1";
                    plusIcon.style.opacity = "0";
                });

                // Increment only when clicking the plus icon
                plusIcon.addEventListener("click", (event) => {
                    event.stopPropagation();
                    count++;
                    showCount(count);
                    localStorage.setItem(localKey, count);
                    setCountColor("#F59E0B");
                    saveToFirebase(count);
                });
            }
            // Mobile/touch devices
            else {
                plusIcon.addEventListener("click", (event) => {
                    event.stopPropagation();
                    if (mobileFirstTap) {
                        // First tap: show plus icon
                        image.style.opacity = "0.2";
                        plusIcon.style.opacity = "1";
                        mobileFirstTap = false;

                        setTimeout(() => {
                            image.style.opacity = "1";
                            plusIcon.style.opacity = "0";
                            mobileFirstTap = true;
                        }, 3000);
                    } else {
                        // Second tap: increment
                        count++;
                        showCount(count);
                        localStorage.setItem(localKey, count);
                        setCountColor("#F59E0B");
                        saveToFirebase(count);

                        image.style.opacity = "1";
                        plusIcon.style.opacity = "0";
                        mobileFirstTap = true;
                    }
                });
            }
        }

        // Adoration Counters for Abhi
        setupCounter(
            "adoration-count-card",                // cardId (desktop)
            "adoration-card-image",                // imageId
            "adoration-plus-icon",                 // plusIconId
            "adoration-count-loading",             // loadingId
            "adoration-count-value",               // valueId
            "adoration_count_abhi",                // localKey
            "adoration",                           // firebaseDocName
            "abhi"                                 // collectionName
        );

        setupCounter(
            "adoration-count-card-mobile-abhi",    // cardId (mobile)
            "adoration-card-image-mobile-abhi",    // imageId
            "adoration-plus-icon-mobile-abhi",     // plusIconId
            "adoration-count-loading-mobile-abhi", // loadingId
            "adoration-count-value-mobile-abhi",   // valueId
            "adoration_count_abhi",                // localKey
            "adoration",                           // firebaseDocName
            "abhi"                                 // collectionName
        );
    </script>
    <!-- Adoration Counter Script for Melna -->
    <script type="module">
        const { doc, getDoc, updateDoc } = window.firebaseFns;

        function setupCounter(cardId, imageId, plusIconId, loadingId, valueId, localKey, firebaseDocName, collectionName) {
            const card = document.getElementById(cardId);
            const image = document.getElementById(imageId);
            const plusIcon = document.getElementById(plusIconId);
            const loadingSpinner = document.getElementById(loadingId);
            const countValue = document.getElementById(valueId);

            if (!card || !plusIcon) return;

            let count = 0;
            let mobileFirstTap = true;

            function showLoading() {
                loadingSpinner.classList.remove("hidden");
                countValue.classList.add("hidden");
            }

            function showCount(value) {
                countValue.textContent = value;
                loadingSpinner.classList.add("hidden");
                countValue.classList.remove("hidden");
            }

            function setCountColor(color) {
                countValue.style.color = color;
            }

            // Show loading initially
            showLoading();

            // Load from Local Storage
            if (localStorage.getItem(localKey)) {
                count = parseInt(localStorage.getItem(localKey), 10);
                showCount(count);
            }

            // Load from Firebase
            async function loadFromFirebase() {
                const ref = doc(window.db, collectionName, firebaseDocName);
                try {
                    const snapshot = await getDoc(ref);
                    if (snapshot.exists()) {
                        count = snapshot.data().value || 0;
                        localStorage.setItem(localKey, count);
                        showCount(count);
                    } else {
                        showCount(0);
                    }
                } catch (err) {
                    console.error("Error fetching from Firebase:", err);
                    showCount(count || 0);
                }
            }
            loadFromFirebase();

            // Save to Firebase
            async function saveToFirebase(newCount) {
                const ref = doc(window.db, collectionName, firebaseDocName);
                try {
                    await updateDoc(ref, { value: newCount });
                    setCountColor("#34D399"); // green flash
                    setTimeout(() => setCountColor("white"), 1000);
                } catch (err) {
                    console.error("Error saving to Firebase:", err);
                    setCountColor("red");
                }
            }

            // Desktop hover effects
            if (window.matchMedia("(hover: hover)").matches) {
                card.addEventListener("mouseenter", () => {
                    image.style.opacity = "0.2";
                    plusIcon.style.opacity = "1";
                });
                card.addEventListener("mouseleave", () => {
                    image.style.opacity = "1";
                    plusIcon.style.opacity = "0";
                });

                // Increment only when clicking the plus icon
                plusIcon.addEventListener("click", (event) => {
                    event.stopPropagation();
                    count++;
                    showCount(count);
                    localStorage.setItem(localKey, count);
                    setCountColor("#F59E0B");
                    saveToFirebase(count);
                });
            }
            // Mobile/touch devices
            else {
                plusIcon.addEventListener("click", (event) => {
                    event.stopPropagation();
                    if (mobileFirstTap) {
                        // First tap: show plus icon
                        image.style.opacity = "0.2";
                        plusIcon.style.opacity = "1";
                        mobileFirstTap = false;

                        setTimeout(() => {
                            image.style.opacity = "1";
                            plusIcon.style.opacity = "0";
                            mobileFirstTap = true;
                        }, 3000);
                    } else {
                        // Second tap: increment
                        count++;
                        showCount(count);
                        localStorage.setItem(localKey, count);
                        setCountColor("#F59E0B");
                        saveToFirebase(count);

                        image.style.opacity = "1";
                        plusIcon.style.opacity = "0";
                        mobileFirstTap = true;
                    }
                });
            }
        }

        // Melna - Adoration Counters
        setupCounter(
            "melna-adoration-count-card",              // cardId (desktop)
            "melna-adoration-card-image",              // imageId
            "melna-adoration-plus-icon",               // plusIconId
            "melna-adoration-count-loading",           // loadingId
            "melna-adoration-count-value",             // valueId
            "melna_adoration_count",                   // localKey
            "adoration",                               // firebaseDocName
            "melna"                                    // collectionName
        );

        setupCounter(
            "melna-adoration-count-card-mobile",       // cardId (mobile)
            "melna-adoration-card-image-mobile",       // imageId
            "melna-adoration-plus-icon-mobile",        // plusIconId
            "melna-adoration-count-loading-mobile",    // loadingId
            "melna-adoration-count-value-mobile",      // valueId
            "melna_adoration_count",                   // localKey
            "adoration",                               // firebaseDocName
            "melna"                                    // collectionName
        );
    </script>







</body>

</html>
